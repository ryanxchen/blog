<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>TanxChen'blog</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,minimal-ui,viewport-fit=cover"><meta data-n-head="ssr" name="keywords" content="ryanx chen blog"><meta data-n-head="ssr" data-hid="description" name="description" content="Tanx Chen's blog 编程&前端&记录总结个人成长"><base href="/blog/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link data-n-head="ssr" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script data-n-head="ssr" src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><link rel="preload" href="/blog/_nuxt/b948a9f.js" as="script"><link rel="preload" href="/blog/_nuxt/c57fec5.js" as="script"><link rel="preload" href="/blog/_nuxt/daf0190.js" as="script"><link rel="preload" href="/blog/_nuxt/1ee202e.js" as="script"><link rel="preload" href="/blog/_nuxt/7b2c13c.js" as="script"><link rel="preload" href="/blog/_nuxt/c1e6e7d.js" as="script"><link rel="preload" href="/blog/_nuxt/9d1221b.js" as="script"><style data-vue-ssr-id="3a312388:0 f52d43e0:0 9b3ab808:0 fa7ff0ca:0 56b15182:0 16c1e6ff:0 01b54bb1:0 762dd866:0">a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,main,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}[hidden]{display:none}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}body,html{background-color:#fff;color:#000;letter-spacing:.5px;font-family:"Source Sans Pro",Arial,sans-serif;margin:0}a,a:focus,a:hover,a:visited{color:#000;text-decoration:none}a.link{color:#2196f3}.post{padding:25px 0 15px}.post .post-title{margin:0;color:#555;text-align:left;font:700 25px/1.1 ff-tisa-web-pro,Cambria,"Times New Roman",Georgia,Times,sans-serif}.post-title a{position:relative}.post-title a:hover:after{opacity:1;transform:scaleX(1)}.post-title a:after{position:absolute;bottom:-4px;left:0;right:0;height:3px;background:#000;content:"";opacity:0;transition:transform .1s ease-in;transform:scaleX(0)}.post .post-meta{padding:0;margin:15px 0 0;color:#6e7173;display:inline-block;text-indent:.15em}.post .post-meta:before{font-family:FontAwesome;content:"\f073";padding-right:.3em}.post .post-content{clear:left;font-size:16px;line-height:1.5;color:#444;padding-top:15px;text-align:justify;word-break:break-all}.readmore{padding:20px 0;text-align:right}.readmore a{font-size:14px;color:#444;padding:5px 10px;border:1px solid #ddd;border-radius:5px}.readmore a:hover{border:1px solid #999}.readmore a:after{font-family:FontAwesome;content:"\f101";padding-left:.3em}.blog-comments-wrap{padding-bottom:20px}.mdcontent h1,.mdcontent h2,.mdcontent h3,.mdcontent h4,.mdcontent h5,.mdcontent h6{font-weight:600;line-height:1.25;margin-bottom:16px;margin-top:24px}.mdcontent h1,.mdcontent h2{border-bottom:1px solid #eaecef;padding-bottom:.3em}.mdcontent h1{font-size:2em}.mdcontent h2{font-size:1.5em}.mdcontent code{background-color:#f6f8fa;padding:4px 6px;border-radius:4px}.mdcontent code a{background-color:rgba(27,31,35,.05)}.mdcontent p{margin:6px 0}.mdcontent blockquote{border-left:.25em solid #dfe2e5;color:#6a737d;padding:0 1em}.mdcontent li,.mdcontent ul{margin:initial;padding:initial}.mdcontent ul{padding-left:2em;margin-bottom:16px;margin-top:0}.mdcontent li{list-style:disc outside none;list-style:initial}.mdcontent img{max-width:100%}.mdcontent table{margin-bottom:16px;margin-top:0;border-collapse:collapse;border-spacing:0}.mdcontent table td,.mdcontent table th{border:1px solid #dfe2e5;padding:6px 13px;text-align:center}.mdcontent pre,.mdcontent pre[class*=language-]{border:1px solid #eaecef;background-color:#f6f8fa;padding:10px 20px;border-radius:4px;font-size:85%;line-height:1.45;overflow:auto;margin:10px 0}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#e91e63}.mdcontent pre code,.mdcontent pre[class*=language-] code{color:#525252}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#389d70}.token.punctuation{color:#2973b7}.token.boolean,.token.function,.token.number{color:#e96900}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#b3b3b3}.token.entity,.token.operator,.token.url{color:#cd6767}.token.tag{color:#3ca0e6}.token.attr-name,.token.deleted,.token.namespace{color:#fc9153}.token.punctuation{color:#666}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#3fb374}.token.property{color:#4a90e2}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.body-container{max-width:720px;min-width:320px;box-sizing:border-box;margin:0 auto;min-height:100vh;padding-bottom:60px}@media screen and (max-width:720px){.body-container{padding:0 20px 60px}}.title[data-v-78559170]{color:#333}.bl-header{padding:20px 0 0;text-align:left;border-bottom:1px solid #ddd;position:relative;margin-bottom:25px}.site-name{margin-bottom:40px}.description{margin:.2em 0 0;color:#999}.nav-menu{margin:10px 0 -1px;padding:0;position:absolute;right:0;bottom:0}.nav-menu a{display:inline-block;padding:3px 20px;line-height:30px;color:#444;font-size:13px;border:1px solid transparent}.nav-menu a.nuxt-link-exact-active{border:1px solid;border-color:#ddd #ddd #fff}.bl-footer{border-top:1px solid #e5e5e5;max-width:720px;margin-left:auto;margin-right:auto;line-height:1.4;height:60px;box-sizing:border-box}.footer-wrap{display:flex;align-items:center;justify-content:center;height:100%;flex-flow:wrap}</style><link rel="preload" href="/blog/_nuxt/static/1617550096/article/5c4b2ef6425f444b816c7a18/state.js" as="script"><link rel="preload" href="/blog/_nuxt/static/1617550096/article/5c4b2ef6425f444b816c7a18/payload.js" as="script"><link rel="preload" href="/blog/_nuxt/static/1617550096/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><section class="container body-container" data-v-78559170><div class="bl-header" data-v-78559170><div class="site-name"><a href="/blog/" class="nuxt-link-active"><img src="/blog/_nuxt/img/logo_200_200.fc1fc4c.png" alt="logo" style="width:40px;height:40px;border-radius:5px"></a> <p class="description">Stay Hungry. Stay Foolish.</p></div> <div class="nav-menu"><a href="/blog/" class="current nuxt-link-active"><i class="fa fa-home"> 首页</i></a> <a href="/blog/about"><i class="fa fa-user"> 关于</i></a></div></div> <div class="post" data-v-78559170><h1 class="post-title title" data-v-78559170>
      浏览器相关知识点
    </h1> <div class="post-meta" data-v-78559170>2019-01-25 23:44:55</div> <div class="article-mdcontent post-content mdcontent" data-v-78559170><h3>浏览器输入url到看到页面的流程</h3>
<ul>
<li>DNS解析
<ul>
<li>DNS服务器对域名解析，得到目标服务器的IP后，进行HTTP访问</li>
</ul>
</li>
<li>↓</li>
<li>应用层【HTTP数据】</li>
<li>↓</li>
<li>传输层【TCP协议：确保可靠性】
<ul>
<li>为了传输方便，在传输层（TCP 协议）把从应用层处收到的数据（HTTP 请求报文）进行分割，并在各个报文上打上标记序号及端口号后转发给网络层。</li>
<li>三次握手🤝
<ul>
<li>握手过程中使用了TCP的标志 [flag] —— SYN [synchronize] 和 ACK [acknowledgement]
<ul>
<li>发送端首先发送一个带 SYN 标志的数据包给对方。</li>
<li>接收端收到后，回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。</li>
<li>最后，发送端再回传一个带 ACK 标志的数据包，代表“握手”结束。若在握手过程中某个阶段莫名中断，TCP 协议会再次以相同的顺序发送相同的数据包。<br><img src="https://gitee.com/tanxchen/img/raw/master/blog/tcp-3-call.jpg" width="420px" height="280px"></li>
</ul>
</li>
</ul>
</li>
<li>除了上述三次握手，TCP 协议还有其他各种手段来保证通信的可靠性</li>
</ul>
</li>
<li>↓</li>
<li>网络层【IP协议：负责传输、ARP协议：地址解析协议】
<ul>
<li>增加作为通信目的地的 MAC 地址</li>
<li>ARP 是一种用以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址</li>
</ul>
</li>
<li>↓</li>
<li>数据链路层</li>
<li>↓</li>
<li>服务器
<ul>
<li>数据链路层接收，按序往上层发送，并把对应的首部消去，TCP按序重组请求报文，HTTP处理请求，返回响应</li>
</ul>
</li>
<li>↓</li>
<li>处理请求，返回响应内容</li>
<li>↓</li>
<li>浏览器得到资源内容/报文，进行解析渲染
<ul>
<li>检查HTML并构建DOM
<ul>
<li>字节 -> 字符串 -> node -> DOM</li>
</ul>
</li>
<li>检查CSS并构建CSSOM【CSS Object Model，是一个建立在web页面上的 CSS 样式的映射】
<ul>
<li>字节 -> 字符串 -> node -> DOM</li>
</ul>
</li>
<li>Web浏览器将DOM和CSSOM结合，并构建出渲染树（render tree）
<ul>
<li>包含节点和节点样式信息</li>
</ul>
</li>
<li>渲染引擎根据 RenderTree 开始渲染和展示
<ul>
<li>布局（回流）：确定节点位置和大小</li>
<li>绘制：调用CPU，合成图层，显示与屏幕</li>
</ul>
</li>
<li>遇到 script、link 会阻塞</li>
</ul>
</li>
<li>断开连接，四次挥手👋<br>
<img src="https://gitee.com/tanxchen/img/raw/master/blog/http-tcp.jpg" width="450px" height="450px">
<br></li>
</ul>
<hr>
<br>
<img src="https://gitee.com/tanxchen/img/raw/master/blog/all.jpg" width="500px" height="700px">
<h3>协议对应OSI七层模型位置：</h3>
<ul>
<li>物理层</li>
<li>数据链路层</li>
<li>网络层
<ul>
<li>IP</li>
</ul>
</li>
<li>传输层
<ul>
<li>TCP</li>
<li>UDP(User Data Protocal): 用户数据报协议
<ul>
<li>不可靠，可能丢包而且包的顺序性也不能保证</li>
</ul>
</li>
</ul>
</li>
<li>会话层</li>
<li>表示层</li>
<li>应用层
<ul>
<li>http</li>
</ul>
</li>
</ul>
<h3>重绘、回流有什么区别？</h3>
<ul>
<li>网页生成时，至少会渲染一次，在用户访问过程中，还会不断重新渲染</li>
<li>重绘是当节点需要更改外观而不影响布局，如：color的改变</li>
<li>回流是布局或者几何属性的改变，如：width、height的改变</li>
<li>回流必定发生重绘，重绘未必引发回流</li>
</ul>
<h3>async 和 defer 有什么区别？</h3>
<ul>
<li>async 如果已经加载好，就会开始执行</li>
<li>defer 不阻塞 HTML 的解析，HTML解析完后，再执行</li>
<li>加载多个JS脚本，async无序加载，而defer有序加载
<ul>
<li>如加载 谷歌统计代码，使用async</li>
<li>加载 JS相互依赖代码，使用defer，如 jQuery.js、jQuery-plugin.js</li>
</ul>
</li>
</ul>
<h3>为什么操作DOM慢？</h3>
<ul>
<li>相当于不同线程之间的通信</li>
<li>可能带来重绘、回流</li>
</ul>
<h3>强缓存和协商缓存</h3>
<blockquote>
<p>强缓存是不经过服务器的, 协商缓存是经过服务器的</p>
</blockquote>
<blockquote>
<p>强缓存可能从本地内存获取，也可能从本地磁盘内读取</p>
</blockquote>
<ul>
<li>强缓存相关字段(Expires(响应头), Cache-Control(响应头)),
<blockquote>
<p>Cache-Control优先级大于Expires</p>
</blockquote>
<ul>
<li>Cache-Control
<ul>
<li>no-cache：强制向源服务器再次验证</li>
<li>no-store：不缓存请求或响应的任何内容，<strong>这才是真的’no-cache’不缓存</strong></li>
<li>…</li>
</ul>
</li>
</ul>
</li>
<li>协商缓存相关字段(Last-Modified(响应头), If-Modified-Since(请求头), Etag(响应头), If-None-Match(请求头))</li>
</ul>
<p>HTTP 缓存机制流程图:</p>
<p><img src="https://gitee.com/tanxchen/img/raw/master/blog/cache.jpeg" alt="catch"></p>
<h3>为什么建立连接是三次握手，而关闭连接却是四次挥手呢？</h3>
<hr>
<p><a href="https://book.douban.com/subject/25863515/">参考-图解HTTP</a><br>
<a href="https://varvy.com/performance/cssom.html">参考-Introduction to the CSS Object Model</a><br>
<a href="https://juejin.im/post/5c24d736f265da614b120d4a">参考-掘金文章-深入浅出浏览器渲染原理</a><br>
<a href="https://juejin.im/post/5a0444d45188255ea95b66bc">参考-掘金文章-TCP的三次握手四次挥手</a><br>
<a href="https://segmentfault.com/a/1190000017184701">参考-segmentfault文章-从URL输入到页面展现到底发生什么？</a><br>
<a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/http/http.md">参考-github.com/MuYunyun/blog</a></p>
<p>ARP协议相关资料：<a href="https://baike.baidu.com/item/ARP/609343">ARP协议百度百科</a></p>
</div> <div id="article-gitalk-container" class="blog-comments-wrap" data-v-78559170></div></div></section> <footer class="bl-footer" style="position:relative;margin-top:-60px"><div class="footer-wrap"><div style="text-align:center">
      2018-present © by <a href="http://www.tanxchen.com" target="_blank">TanxChen</a> All Rights Reserved. <a href="http://www.miitbeian.gov.cn" target="_blank">浙ICP备18014267号-1</a></div></div></footer></div></div></div><script defer src="/blog/_nuxt/static/1617550096/article/5c4b2ef6425f444b816c7a18/state.js"></script><script src="/blog/_nuxt/b948a9f.js" defer></script><script src="/blog/_nuxt/7b2c13c.js" defer></script><script src="/blog/_nuxt/c1e6e7d.js" defer></script><script src="/blog/_nuxt/9d1221b.js" defer></script><script src="/blog/_nuxt/c57fec5.js" defer></script><script src="/blog/_nuxt/daf0190.js" defer></script><script src="/blog/_nuxt/1ee202e.js" defer></script>
  </body>
</html>
